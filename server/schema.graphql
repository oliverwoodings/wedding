type Query {
  publicUser(codeOrEmail: String!): PublicUser
  tracks(query: String!): SpotifySearchResults
  user: User
}

type PublicUser {
  guests: [PublicGuest]!
  new: Boolean!
}

type PublicGuest {
  firstName: String!
}

type User {
  guests: [Guest]!
  new: Boolean!
  code: String!
  email: String!
  eveningOnly: Boolean!
}

type Guest {
  id: Int!
  firstName: String!
  lastName: String!
  isAttending: Boolean
  hasDietaryRequirements: Boolean!
  dietaryRequirements: String
  isChild: Boolean!
}

type SpotifySearchResults {
  limit: Int
  offset: Int
  total: Int
  items: [SpotifyTrack]!
}

type SpotifyTrack {
  id: String!
  album: SpotifyAlbum
  artists: [SpotifyArtist]!
  name: String!
  previewUrl: String
  durationMs: Int!
  externalUrls: SpotifyExternalUrls!
}

type SpotifyAlbum {
  name: String!
  images: [SpotifyImage]!
}

type SpotifyImage {
  height: Int!
  width: Int!
  url: String!
}

type SpotifyArtist {
  name: String!
}

type SpotifyExternalUrls {
  spotify: String
}

input GuestInput {
  isAttending: Boolean
  hasDietaryRequirements: Boolean
  dietaryRequirements: String
}

type Mutation {
  login(codeOrEmail: String!, password: String!): User
  changePassword(code: String!, email: String!, password: String!): User
  updateGuest(guestId: Int!, guest: GuestInput!): Guest
}
